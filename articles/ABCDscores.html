<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ABCDscores • ABCDscores</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ABCDscores">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ABCDscores</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">6.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/ABCDscores.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/aseba.html">Achenbach System of Empirically Based Assessment (ASEBA) T-scores</a></li>
    <li><a class="dropdown-item" href="../articles/sui.html">Substance Use Interview (SUI) summary scores</a></li>
    <li><a class="dropdown-item" href="../articles/tlfb.html">Timeline Followback (TLFB) summary scores</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nbdc-datahub/ABCDscores/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>ABCDscores</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nbdc-datahub/ABCDscores/blob/main/vignettes/ABCDscores.Rmd" class="external-link"><code>vignettes/ABCDscores.Rmd</code></a></small>
      <div class="d-none name"><code>ABCDscores.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>After installing the package, you can load it with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://software.nbdc-datahub.org/ABCDscores/">ABCDscores</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Welcome to the `ABCDscores` package! For more information, visit: https://software.nbdc-datahub.org/ABCDscores/</span></span>
<span><span class="co">#&gt; This package is developed by the ABCD Data Analysis, Informatics &amp; Resource Center (DAIRC) at the J. Craig Venter Institute (JCVI).</span></span>
<span><span class="co">#&gt; If `ABCDscores` is helpful to your research, please cite:</span></span>
<span><span class="co">#&gt; Zhang, L., Celhay, O., Das, B., Berman, S., Ziemer, L. R., Smith, C. J., Dale, A. M., &amp; Linkersdörfer, J. (2025). ABCDscores: An R package for computing summary scores in the ABCD Study. bioRxiv. https://doi.org/10.1101/2025.09.04.674066</span></span></code></pre></div>
<p>Alternatively you can call functions directly, without loading the
package, using <code>::</code>, e.g.,
<code>ABCDscores::name_of_function(...)</code></p>
<div class="section level3">
<h3 id="data-preparation">Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation"></a>
</h3>
<p>To compute summary scores, you’ll need to have downloaded data from
the ABCD Study<sup>®</sup>. To request access to the data, visit the <a href="https://www.nbdc-datahub.org/" class="external-link">NIH Brain Development Cohorts
(NBDC) Data Hub</a> Once you have access, you can use different tools to
access and download the data; they are described in more detail in the
<a href="https://docs.abcdstudy.org/latest/tools/tools.html" class="external-link">ABCD data
documentation</a>.</p>
<p>Here we assume that you created a dataset containing the variables
you want to summarize in <a href="https://abcd.deapscience.com/" class="external-link">DEAP</a> and downloaded it in the
<code>rds</code> format. Afterwards, unzip the
<code>dataset.rds.zip</code> file to the working directory (or move the
zip file to the working directory and use
<code>utils::unzip("dataset.rds.zip")</code> to extract all files). The
unzipped files should consist of a <code>dataset.rds</code> file and an
Excel file with the data dictionary and categorical levels.</p>
<p>Load the data into R using the following command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"dataset.rds"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="computing-summary-scores">Computing summary scores<a class="anchor" aria-label="anchor" href="#computing-summary-scores"></a>
</h2>
<div class="section level3">
<h3 id="score-naming-convention">Score naming convention<a class="anchor" aria-label="anchor" href="#score-naming-convention"></a>
</h3>
<p>Before computing summary scores, it is important to understand the
structure and nomenclature of the functions in the package:</p>
<ul>
<li>For any given summary score, the function to compute it is named
<code>compute_&lt;score_name&gt;()</code>. For example, the function to
compute the score <code>fc_p_psb_mean</code> is named
<code><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean()</a></code>.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;There are a few exceptions to this rule—the summary
scores in the tables &lt;code&gt;su_y_sui&lt;/code&gt; and &lt;code&gt;su_y_tlfb&lt;/code&gt;
are computed using higher level functions as explained in the &lt;a href="https://software.nbdc-datahub.org/ABCDscores/articles/sui.html"&gt;SUI&lt;/a&gt;
and &lt;a href="https://software.nbdc-datahub.org/ABCDscores/articles/tlfb.html"&gt;TLFB&lt;/a&gt;
vignettes.&lt;/p&gt;'><sup>1</sup></a>
</li>
<li>For any given measure/table, there exists a high-level
<code>compute_&lt;table_name&gt;_all()</code> function that computes all
scores for that measure/table. For example, the function to compute all
scores for the <code>fc_p_psb</code> measure/table is named
<code><a href="../reference/compute_fc_p_psb_all.html">compute_fc_p_psb_all()</a></code>.</li>
<li>For any given summary score function, certain columns—the columns
that are being summarized and in some cases additional columns like age
or sex—are required to be present in the data for the score to be
computed. The function documentation lists the required columns for a
given function. In addition, the columns that a summary score function
summarizes are typically provided as a character vector named
<code>vars_&lt;measure_name&gt;</code>. For example, the vector with the
columns that are summarized by the <code>fc_p_psb_mean</code> function
is named <code>vars_fc_p_psb</code>.</li>
</ul>
<p>The <a href="https://software.nbdc-datahub.org/ABCDscores/reference/index.html">references
page</a> provides a list of all available functions and their
parameters.</p>
</div>
<div class="section level3">
<h3 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<p>After reading in the data, we can start to compute summary scores. As
an example, we will demonstrate how to compute the two summary scores
for the <code>fc_p_psb</code> measure/table (<code>fc_p_psb_mean</code>
and <code>fc_p_psb_nm</code>) in two different ways:</p>
<ol style="list-style-type: decimal">
<li>using the specific functions to compute one score at a time</li>
<li>using the <code>_all()</code> function to compute all scores for the
measure/table at once.</li>
</ol>
<p>When we refer to the documentation for
<code><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean()</a></code>, we see that it requires the
following variables: <code>fc_p_psb_001</code>,
<code>fc_p_psb_002</code>, and <code>fc_p_psb_003</code>. If these
variables are part of the dataset created in and downloaded from <a href="https://abcd.deapscience.com/" class="external-link">DEAP</a>, they should be present in
the data after reading in <code>dataset.rds</code> as demonstrated
above.</p>
<p>Here, for demonstration purposes, we will create a dummy data frame
with these columns:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  fc_p_psb_001 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span><span class="op">)</span>,</span>
<span>  fc_p_psb_002 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="cn">NA</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  fc_p_psb_003 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"2"</span>, <span class="st">"4"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>For most summary score functions, only the <code>data</code> argument
(input data frame) is required, i.e., we can just use the function like
this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                     1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                     2.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                     4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                   <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>We can do the same using <code>fc_p_psb_nm()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_nm.html">compute_fc_p_psb_nm</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_nm</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                      0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                     2</span></span></code></pre></div>
<p>We can also compute both scores at the same time by chaining the
function calls using the pipe operator:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/compute_fc_p_psb_nm.html">compute_fc_p_psb_nm</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean fc_p_psb_nm</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                     1              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                    <span style="color: #BB0000;">NA</span>              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                     2.67           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                     4              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                   <span style="color: #BB0000;">NA</span>              2</span></span></code></pre></div>
<p>Lastly, if we want to compute all scores for the measure with one
function call, we can use the
<code>compute_&lt;table_name&gt;_all()</code> function for the
<code>fc_p_psb</code> table:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_all.html">compute_fc_p_psb_all</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean fc_p_psb_nm</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                     1              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                    <span style="color: #BB0000;">NA</span>              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                     2.67           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                     4              0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                   <span style="color: #BB0000;">NA</span>              2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="important-parameters-and-customization">Important parameters and customization<a class="anchor" aria-label="anchor" href="#important-parameters-and-customization"></a>
</h3>
<div class="section level4">
<h4 id="data">
<code>data</code><a class="anchor" aria-label="anchor" href="#data"></a>
</h4>
<p>The <code>data</code> argument is the input data frame that contains
the columns required to compute the score. The required columns are
documented in the function documentation for each score.</p>
</div>
<div class="section level4">
<h4 id="name">
<code>name</code><a class="anchor" aria-label="anchor" href="#name"></a>
</h4>
<p>The <code>name</code> argument is used to specify the name of the
output score. The default default value for this parameter is the
official name of the column in the released data, but it can be
overridden by users with a custom name.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean</a></span><span class="op">(</span><span class="va">data</span>, name <span class="op">=</span> <span class="st">"my_custom_name"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 my_custom_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                      1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                     <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                      2.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                      4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>For example, this is useful when the data frame specified in
<code>data</code> contains the official summary score that one is trying
to reproduce. In this case, the user is required to specify a different
name; otherwise the function will return an error.</p>
</div>
<div class="section level4">
<h4 id="combine">
<code>combine</code><a class="anchor" aria-label="anchor" href="#combine"></a>
</h4>
<p>The <code>combine</code> argument is used to specify whether to
combine the output score with the input data frame. The default value is
<code>TRUE</code>, which means the output score is appended as a new
column on the right hand side of the input data frame. If the argument
is set to <code>FALSE</code>, the output score is returned as a
single-column data frame:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean</a></span><span class="op">(</span><span class="va">data</span>, combine <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 1</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_mean</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>          1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>          2.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>          4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>         <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="max_na">
<code>max_na</code><a class="anchor" aria-label="anchor" href="#max_na"></a>
</h4>
<p>The <code>max_na</code> argument is used to specify the maximum
number of missing values across all summarized variables a given row (or
participant/event) can have for the summary score to still be computed.
If the number of missing values in a row exceeds the specified value,
the score for that row is set to <code>NA</code>. Depending on the
summary score, the number of missing values allowed may vary and not all
summary score functions have this argument.</p>
<ul>
<li>
<code>NULL</code>: No limit on missing values.</li>
<li>
<code>0</code>: No missing values allowed.</li>
<li>
<code>1</code>: At most one missing value allowed.</li>
<li>…</li>
</ul>
<p>For most summary scores in the ABCD data resource,
<code>max_na</code> is set to a number that ensures that &gt;=80% of the
variables that the given score summarizes have a non-missing value.
Users can use the <code>max_na</code> argument if they want to compute
the summary score in a more lenient or more restrictive manner.</p>
<p>As an example, let’s explore how the summary score changes when we
set <code>max_na</code> argument to <code>1</code> (above we used the
default, which in the case of <code><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean()</a></code> is
<code>0</code>). Now a score is computed for the second row which has
one missing value but not for the last row which has two missing
values:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean</a></span><span class="op">(</span><span class="va">data</span>, max_na <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                     1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                     2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                     2.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                     4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                   <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>When we change <code>max_na</code> to <code>2</code>, a score is also
computed for the last row:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_fc_p_psb_mean.html">compute_fc_p_psb_mean</a></span><span class="op">(</span><span class="va">data</span>, max_na <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   fc_p_psb_001 fc_p_psb_002 fc_p_psb_003 fc_p_psb_mean</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1            1            1                     1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2            <span style="color: #BB0000;">NA</span>           2                     2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 3            3            2                     2.67</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 4            4            4                     4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 5            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                    5</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="exclude">
<code>exclude</code><a class="anchor" aria-label="anchor" href="#exclude"></a>
</h4>
<p>The <code>exclude</code> argument is used to specify values that
should be excluded from the computation of the score. Some specific
values in the data might be considered as missing values, e.g., coded
non-responses like “Don’t know” (<code>999</code>), “Decline to answer”
(<code>777</code>), etc. This argument allows the user to specify these
values so that they are treated as missing values during the computation
of the score (importantly, the <code>max_na</code> argument applies to
all values that are either missing, <code>NA</code>, or specified as
values to be excluded using the <code>exclude</code> argument). Not all
score functions have this argument.</p>
<p>In this example we use another score function
<code>compute_mh_p_abcl__afs__frnd_sum</code> which has the
<code>exclude</code> argument. We first construct a dummy data
frame:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  mh_p_abcl__frnd_001 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  mh_p_abcl__frnd_002 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">777</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">777</span><span class="op">)</span>,</span>
<span>  mh_p_abcl__frnd_003 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">NA</span>, <span class="fl">4</span>, <span class="fl">777</span><span class="op">)</span>,</span>
<span>  mh_p_abcl__frnd_004 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">999</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span><span class="va">data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   mh_p_abcl__frnd_001 mh_p_abcl__frnd_002 mh_p_abcl__frnd_003</span></span>
<span><span class="co">#&gt;                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                   1                   1                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                   2                 777                   2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                   3                   3                  <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>                   4                   4                   4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>                   5                 777                 777</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: mh_p_abcl__frnd_004 &lt;dbl&gt;</span></span></span></code></pre></div>
<p>When we compute the score, only the 1, 4 rows are computed, because
other rows contain <code>777</code> or <code>999</code> or
<code>NA</code> values.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_mh_p_abcl__afs__frnd_sum.html">compute_mh_p_abcl__afs__frnd_sum</a></span><span class="op">(</span><span class="va">data</span>, exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"777"</span>, <span class="st">"999"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">#&gt;   mh_p_abcl__frnd_001 mh_p_abcl__frnd_002 mh_p_abcl__frnd_003</span></span>
<span><span class="co">#&gt;                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                   1                   1                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                   2                 777                   2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                   3                   3                  <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>                   4                   4                   4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>                   5                 777                 777</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: mh_p_abcl__frnd_004 &lt;dbl&gt;, mh_p_abcl__afs__frnd_sum &lt;int&gt;</span></span></span></code></pre></div>
<p>We can also exclude custom values, for example, we can exclude
<code>4</code>, and then only the first row is computed.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/compute_mh_p_abcl__afs__frnd_sum.html">compute_mh_p_abcl__afs__frnd_sum</a></span><span class="op">(</span><span class="va">data</span>, exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"777"</span>, <span class="st">"999"</span>, <span class="st">"4"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 5</span></span></span>
<span><span class="co">#&gt;   mh_p_abcl__frnd_001 mh_p_abcl__frnd_002 mh_p_abcl__frnd_003</span></span>
<span><span class="co">#&gt;                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                   1                   1                   1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                   2                 777                   2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>                   3                   3                  <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>                   4                   4                   4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>                   5                 777                 777</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: mh_p_abcl__frnd_004 &lt;dbl&gt;, mh_p_abcl__afs__frnd_sum &lt;int&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="utility-functions">Utility functions<a class="anchor" aria-label="anchor" href="#utility-functions"></a>
</h3>
<p>The <code>compute_&lt;score_name&gt;()</code> functions are the main
functions to compute summary scores, with one summary score function for
each score (besides a few exceptions that are documented in the other <a href="https://software.nbdc-datahub.org/ABCDscores/articles/">vignettes</a>).
However, to be more concise, the main functions often use utility
functions. These utility functions are not necessarily meant to be used
directly by users of this package, but they are documented and exported
for transparency and reproducibility. For the documentation of these
functions, see the <a href="https://software.nbdc-datahub.org/ABCDscores/reference/index.html">reference
page</a>.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Le Zhang, Janosch Linkersdoerfer, Olivier Celhay, Biplabendu Das, Sammy Berman, Laura Ziemer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
